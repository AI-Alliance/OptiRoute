<div class="row gx-0" style="height: 100vh;">
  <div class="d-flex align-items-start flex-column col-2 m-3">
  
    <h2>Marker type</h2>
    <div class="btn-group" role="group" aria-label="Basic mixed styles example">
      <button type="button" [disabled]="hasDepotMarker()" class="btn btn-outline-primary" [class.active]="selectedType == PlaceType.DEPOT" (click)="selectedType = PlaceType.DEPOT">Depot</button>
      <button type="button" class="btn btn-outline-primary" [class.active]="selectedType == PlaceType.CLIENT" (click)="selectedType = PlaceType.CLIENT">Client</button>
    </div>

    <div class="mt-5">
      <div class="h2">Vehicles
        <button class="btn btn-secondary" (click)="addVehicle()">
          +
        </button>
        
      </div>
    </div>
    
    <ul class="list-group"*ngFor="let vehicle of vehicles">
      <li class="list-group-item">
        <div class="form-group row" >
          <small class="text-muted">{{vehicle.uuid}}</small>
          
          <label class="col-3 col-form-label">Capacity:</label>
          <div class="col">
            <input class="form-control" min="0" max="20" type="number" (change)="vehicle.capacity = +$any($event.target).value" [value]="vehicle.capacity">
          </div>
          <div class="col-2">
            <button class="btn btn-sm btn-outline-danger" (click)="removeVehicle(vehicle.uuid)">
              X
            </button>
          </div>
        </div>
      </li>
    </ul>
    
    <div class="mt-auto"><button class="btn btn-success" [disabled]="!taskDataIsReady()" (click)="sendTask()">Send Task</button></div>
    
  </div>
  <div class="col" *ngIf="gMapsService.apiLoaded| async">
    <google-map  height="100%" width="100%" [options]="options" (mapClick)="addMarker($event)">
      
      <map-marker *ngFor="let placeMarker of placeMarkers"  [position]="placeMarker.latLng" [options]="placeMarker.markerOptions" #marker="mapMarker" (mapMouseover)="openInfoWindow(placeMarker, marker)" ></map-marker>
      <map-info-window>
        <div class="my-3">
          <div class="mb-1">
            {{lastMarker?.placeId}}
          </div>
          <div class="form-group row" *ngIf="lastMarker && lastMarker.type!= PlaceType.DEPOT">
            <label class="col-4 col-form-label">Demand:</label>
            <div class="col">
              <input class="form-control" min="0" max="20" type="number" (change)="lastMarker.demand = +$any($event.target).value" [value]="lastMarker.demand">
            </div>
          </div>
        </div>
        <button *ngIf="lastMarker" (click)="deleteMarker(lastMarker)" class="btn btn-sm btn-danger">Delete marker</button>
        <button *ngIf="lastMarker" (click)="getGeoInfo(lastMarker)" class="btn btn-sm btn-info">Info</button>
      </map-info-window>
      <ng-container *ngFor="let dr of directionsResults; index as i ">
        <map-directions-renderer *ngIf="dr" [directions]="dr" [options]="directionsRendererOptions[i]"></map-directions-renderer>
      </ng-container>
    </google-map>
    
  </div>
</div>
